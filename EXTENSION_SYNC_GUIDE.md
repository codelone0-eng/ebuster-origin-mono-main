# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å —Å–∞–π—Ç–æ–º

## –°–æ–±—ã—Ç–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç —Å–∫—Ä–∏–ø—Ç –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏, –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –Ω–∞ —Å–∞–π—Ç:

```javascript
// –í —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ (content script –∏–ª–∏ background script)
window.postMessage({
  type: 'EBUSTER_SCRIPT_UNINSTALLED',
  scriptId: 'uuid-—Å–∫—Ä–∏–ø—Ç–∞'
}, '*');
```

## –°–æ–±—ã—Ç–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞

–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Bridge:

```javascript
window.EbusterBridge.installScript(scriptData)
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ** —É–¥–∞–ª—è–µ—Ç —Å–∫—Ä–∏–ø—Ç –ª–æ–∫–∞–ª—å–Ω–æ
2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `postMessage` —Å —Ç–∏–ø–æ–º `EBUSTER_SCRIPT_UNINSTALLED`
3. **–°–∞–π—Ç** (ScriptsList.tsx –∏ Dashboard.tsx) —Å–ª—É—à–∞–µ—Ç —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ
4. **–°–∞–π—Ç** –≤—ã–∑—ã–≤–∞–µ—Ç API `DELETE /api/scripts/user/uninstall/:id`
5. **–°–µ—Ä–≤–µ—Ä** —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `user_scripts`
6. **–°–∞–π—Ç** –æ–±–Ω–æ–≤–ª—è–µ—Ç UI

## –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏:

```javascript
// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏
async function uninstallScript(scriptId) {
  try {
    // 1. –£–¥–∞–ª—è–µ–º —Å–∫—Ä–∏–ø—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏–∑ chrome.storage
    await chrome.storage.local.remove(`script_${scriptId}`);
    
    // 2. –£–≤–µ–¥–æ–º–ª—è–µ–º —Å–∞–π—Ç
    window.postMessage({
      type: 'EBUSTER_SCRIPT_UNINSTALLED',
      scriptId: scriptId
    }, '*');
    
    console.log('‚úÖ –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω –∏ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ');
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:', error);
  }
}
```

## –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

–ù–∞ —Å–∞–π—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üóëÔ∏è –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞: uuid-—Å–∫—Ä–∏–ø—Ç–∞
‚úÖ –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –ª–æ–≥–∞—Ö API:
```
üóëÔ∏è [uninstallScriptForUser] –£–¥–∞–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞: { userId: '...', scriptId: '...' }
‚úÖ [uninstallScriptForUser] –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –ë–î
```
