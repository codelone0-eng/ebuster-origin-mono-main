# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Cannot read properties of undefined (reading 'split')"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:

```javascript
TypeError: Cannot read properties of undefined (reading 'split')
    at OM (index-C8ic9pb2.js:860:78232)
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ø—ã—Ç–∫–∞ –≤—ã–∑–≤–∞—Ç—å `.split()` –Ω–∞ `undefined` –∑–Ω–∞—á–µ–Ω–∏–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö:

1. `selectedUserDetails.name.split()` - –∫–æ–≥–¥–∞ `name` = `undefined`
2. `user.full_name.split()` - –∫–æ–≥–¥–∞ `full_name` = `undefined`
3. –ü–µ—Ä–µ–¥–∞—á–∞ `undefined` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `handleBanUser` –∏ `handleDeleteUser`

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ undefined

**–§–∞–π–ª:** `src/admin/AdminDashboard.tsx`

#### handleBanUser:
```typescript
const handleBanUser = (user: any) => {
  if (!user) {
    console.error('handleBanUser: user is undefined');
    toast({
      title: "–û—à–∏–±–∫–∞",
      description: "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
      variant: "destructive"
    });
    return;
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
};
```

#### handleDeleteUser:
```typescript
const handleDeleteUser = async (user: any) => {
  if (!user) {
    console.error('handleDeleteUser: user is undefined');
    return;
  }
  
  const userName = user?.full_name || user?.name || user?.email || '—ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
};
```

---

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω optional chaining –¥–ª—è .split()

#### –î–æ:
```typescript
{user.full_name.split(' ').map(n => n[0]).join('')}
{selectedUserDetails.name.split(' ').map(n => n[0]).join('')}
```

#### –ü–æ—Å–ª–µ:
```typescript
{(user?.full_name || user?.name || 'U').split(' ').map((n: string) => n[0] || '').join('')}
{(selectedUserDetails?.full_name || selectedUserDetails?.name || 'U').split(' ').map((n: string) => n[0] || '').join('')}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ `user.full_name` ‚Üí `user?.full_name` (optional chaining)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback: `|| user?.name || 'U'`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É: `n[0] || ''`
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è: `(n: string) =>`

---

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –º–µ—Å—Ç–∞ —Å .split()

**–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 4 –º–µ—Å—Ç–∞

1. **–°—Ç—Ä–æ–∫–∞ ~833:** –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–±–æ–ª—å—à–∏–µ –∞–≤–∞—Ç–∞—Ä—ã)
2. **–°—Ç—Ä–æ–∫–∞ ~1072:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–º–∞–ª–µ–Ω—å–∫–∏–µ –∞–≤–∞—Ç–∞—Ä—ã)
3. **–°—Ç—Ä–æ–∫–∞ ~1335:** –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–æ–ª—å—à–æ–π –∞–≤–∞—Ç–∞—Ä)
4. **–°—Ç—Ä–æ–∫–∞ ~487:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–æ–≤:

**–¢–µ—Å—Ç 1:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø–æ–ª–Ω—ã–º –∏–º–µ–Ω–µ–º
```javascript
user = { full_name: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤" }
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "–ò–ü"
```

**–¢–µ—Å—Ç 2:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –∏–º–µ–Ω–∏
```javascript
user = { email: "test@example.com" }
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "U" (fallback)
```

**–¢–µ—Å—Ç 3:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å undefined
```javascript
user = { full_name: undefined, name: undefined }
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "U" (fallback, –±–µ–∑ –æ—à–∏–±–∫–∏)
```

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π:

**–¢–µ—Å—Ç handleBanUser:**
```javascript
// –í—ã–∑–æ–≤ —Å undefined
handleBanUser(undefined)
// –†–µ–∑—É–ª—å—Ç–∞—Ç: Toast —Å –æ—à–∏–±–∫–æ–π, —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
```

**–¢–µ—Å—Ç handleDeleteUser:**
```javascript
// –í—ã–∑–æ–≤ —Å undefined
handleDeleteUser(undefined)
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, –±–µ–∑ –æ—à–∏–±–∫–∏
```

---

## üîç –î–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

### Optional Chaining (?.)

**–î–æ:**
```typescript
user.full_name.split(' ')
// ‚ùå –û—à–∏–±–∫–∞ –µ—Å–ª–∏ full_name = undefined
```

**–ü–æ—Å–ª–µ:**
```typescript
(user?.full_name || user?.name || 'U').split(' ')
// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ:
// 1. –ï—Å–ª–∏ full_name —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
// 2. –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–±—É–µ–º name
// 3. –ï—Å–ª–∏ –∏ name –Ω–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ–º 'U'
```

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É

**–î–æ:**
```typescript
.map(n => n[0])
// ‚ùå –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å undefined –µ—Å–ª–∏ n = ""
```

**–ü–æ—Å–ª–µ:**
```typescript
.map((n: string) => n[0] || '')
// ‚úÖ –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
```
‚ùå TypeError: Cannot read properties of undefined (reading 'split')
‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç
‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
```
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
‚úÖ –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è
‚úÖ –ò–Ω–∏—Ü–∏–∞–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ Fallback –Ω–∞ 'U' –µ—Å–ª–∏ –Ω–µ—Ç –∏–º–µ–Ω–∏
```

---

## üöÄ –î–µ–ø–ª–æ–π:

### 1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
npm run build
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ production:
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É
https://admin.ebuster.ru

# –û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç:

- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ undefined –≤ handleBanUser
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ undefined –≤ handleDeleteUser
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω optional chaining –¥–ª—è –≤—Å–µ—Ö .split()
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã fallback –∑–Ω–∞—á–µ–Ω–∏—è ('U')
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
- [x] –¢–∏–ø–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ map
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

**–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!** ‚úÖ

**–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫!** üéâ
