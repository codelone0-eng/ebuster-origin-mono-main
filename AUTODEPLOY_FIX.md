# üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∞–≤—Ç–æ–¥–µ–ø–ª–æ–µ —á–µ—Ä–µ–∑ GitHub Actions:
- ‚ùå Volume –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è read-only
- ‚ùå –°—Ç–∞—Ä—ã–π –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –æ—Å—Ç–∞—ë—Ç—Å—è –≤ volume
- ‚ùå –ù–µ–ª—å–∑—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é

## –†–µ—à–µ–Ω–∏–µ
–ò–∑–º–µ–Ω—ë–Ω –ø–æ–¥—Ö–æ–¥:
1. ‚úÖ Volume —Ç–µ–ø–µ—Ä—å **–ù–ï read-only**
2. ‚úÖ –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä **–ù–ï –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è** –≤ –æ–±—Ä–∞–∑ frontend
3. ‚úÖ –î–∞—à–±–æ—Ä–¥ **–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤

## –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. `Dockerfile.frontend`
- –£–±—Ä–∞–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
- Volume –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

### 2. `docker-compose.yml`
- Volume `autotest_reports` —Ç–µ–ø–µ—Ä—å **read-write** (—É–±—Ä–∞–Ω `:ro`)
- –¢–µ—Å—Ç—ã —Å–º–æ–≥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã

### 3. `Dockerfile.autotest`
- –î–æ–±–∞–≤–ª–µ–Ω init-—Å–∫—Ä–∏–ø—Ç
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—ë–º–Ω—ã–π –¥–∞—à–±–æ—Ä–¥

## –ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –∏ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /srv/ebuster

# 1. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down

# 3. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π volume —Å —Å–≤–µ—Ç–ª—ã–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º
docker volume rm ebuster_autotest_reports

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
docker compose up -d

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—ë–º–Ω—ã–π –¥–∞—à–±–æ—Ä–¥)
docker compose run --rm autotest-runner npm run test:all
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ volume –ù–ï read-only
docker inspect ebuster-frontend | grep -A 5 "autotest_reports"

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "RW": true

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞—à–±–æ—Ä–¥ —Ç—ë–º–Ω—ã–π
docker compose exec frontend cat /usr/share/nginx/html/autotest/index.html | grep "background:"

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# --background: #1a1a1a;
```

## Workflow

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è):
1. Volume –ø—É—Å—Ç–æ–π
2. –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã
3. Init-—Å–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—ë–º–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
4. –¢–µ—Å—Ç—ã —Å–æ–∑–¥–∞—é—Ç –æ—Ç—á—ë—Ç—ã
5. –í—Å—ë –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ volume

### –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏:
1. Volume —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞—à–±–æ—Ä–¥
2. –¢–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç –æ—Ç—á—ë—Ç—ã
3. –î–∞—à–±–æ—Ä–¥ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤—ã–º

## –ï—Å–ª–∏ –¥–∞—à–±–æ—Ä–¥ –≤—Å—ë –µ—â—ë —Å–≤–µ—Ç–ª—ã–π

```bash
# –£–¥–∞–ª–∏—Ç–µ volume –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ
docker compose down
docker volume rm ebuster_autotest_reports
docker compose up -d

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
docker compose run --rm autotest-runner npm run test:all

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
curl -s https://autotest.ebuster.ru | grep -o "background: #[0-9a-f]*" | head -1
```

---

**–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è –¥–∞—à–±–æ—Ä–¥ –±—É–¥–µ—Ç —Ç—ë–º–Ω—ã–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** üéâ
