# ğŸš€ Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ EBUSTER

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ
1. [Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹](#Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹-Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹)
2. [ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ñ‡ĞµÑ€ĞµĞ· GitHub Actions](#Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹-Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹-Ñ‡ĞµÑ€ĞµĞ·-github-actions)
3. [ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°](#Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°-ÑĞµÑ€Ğ²ĞµÑ€Ğ°)
4. [ĞÑ‚ĞºĞ°Ñ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹](#Ğ¾Ñ‚ĞºĞ°Ñ‚-Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹)
5. [ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸](#Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³-Ğ¸-Ğ»Ğ¾Ğ³Ğ¸)

---

## ğŸ”§ Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹

### Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ (Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ)

```bash
cd /srv/ebuster
bash deploy.sh
```

Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸:
- âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
- âœ… ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
- âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ ĞºĞ¾Ğ´ Ğ¸Ğ· GitHub
- âœ… ĞŸĞµÑ€ĞµÑĞ¾Ğ±ĞµÑ€Ñ‘Ñ‚ Docker-Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
- âœ… Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
- âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ API
- âœ… ĞÑ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…

### Ğ›Ğ¾Ğ³Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ

Ğ’ÑĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ² `/srv/ebuster/deploy.log`:

```bash
# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ñ… 50 ÑÑ‚Ñ€Ğ¾Ğº Ğ»Ğ¾Ğ³Ğ¾Ğ²
tail -n 50 /srv/ebuster/deploy.log

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
tail -f /srv/ebuster/deploy.log
```

---

## ğŸ¤– ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ñ‡ĞµÑ€ĞµĞ· GitHub Actions

### 1ï¸âƒ£ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° SSH-ĞºĞ»ÑÑ‡ĞµĞ¹

#### ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:

```bash
# 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ SSH-ĞºĞ»ÑÑ‡ Ğ´Ğ»Ñ GitHub Actions (ĞµÑĞ»Ğ¸ ĞµÑ‰Ñ‘ Ğ½ĞµÑ‚)
ssh-keygen -t ed25519 -C "github-actions@ebuster.ru" -f ~/.ssh/github_actions_key -N ""

# 2. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡ Ğ² authorized_keys
cat ~/.ssh/github_actions_key.pub >> ~/.ssh/authorized_keys

# 3. ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡ (ÑĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞµĞ³Ğ¾)
cat ~/.ssh/github_actions_key
```

**âš ï¸ Ğ’ĞĞ–ĞĞ:** Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ²ĞµÑÑŒ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ»ÑÑ‡Ğ°, Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ¸:
```
-----BEGIN OPENSSH PRIVATE KEY-----
...
-----END OPENSSH PRIVATE KEY-----
```

#### ĞĞ° GitHub:

1. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹: https://github.com/codelone0-eng/ebuster-origin-mono-main
2. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ **Settings** â†’ **Secrets and variables** â†’ **Actions**
3. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **New repository secret** Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ‚Ñ€Ğ¸ ÑĞµĞºÑ€ĞµÑ‚Ğ°:

| Ğ˜Ğ¼Ñ ÑĞµĞºÑ€ĞµÑ‚Ğ° | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------------|----------|----------|
| `SSH_PRIVATE_KEY` | Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ `~/.ssh/github_actions_key` | ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ SSH-ĞºĞ»ÑÑ‡ |
| `SERVER_IP` | IP-Ğ°Ğ´Ñ€ĞµÑ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ ÑĞµÑ€Ğ²ĞµÑ€Ğ° | ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: `123.45.67.89` |
| `SERVER_USER` | Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ | ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾ `root` |

### 2ï¸âƒ£ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸

ĞŸĞ¾ÑĞ»Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²:

1. Ğ¡Ğ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ Ğ»ÑĞ±Ğ¾Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ² ĞºĞ¾Ğ´Ğµ
2. Ğ—Ğ°ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑˆÑŒÑ‚Ğµ Ğ² `main`:
   ```bash
   git add .
   git commit -m "test: Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ğ´ĞµĞ¿Ğ»Ğ¾Ñ"
   git push origin main
   ```
3. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² **Actions** Ğ½Ğ° GitHub
4. Ğ’Ñ‹ ÑƒĞ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ½Ñ‹Ğ¹ workflow "Deploy to Production"

### 3ï¸âƒ£ Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ´ĞµĞ¿Ğ»Ğ¾Ñ

ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ±ĞµĞ· ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ°:

1. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² **Actions** â†’ **Deploy to Production**
2. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **Run workflow**
3. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ²ĞµÑ‚ĞºÑƒ `main`
4. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **Run workflow**

---

## ğŸ–¥ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°

### ĞŸĞµÑ€Ğ²Ğ¾Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° (Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·)

```bash
# 1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
sudo apt-get update
sudo apt-get install -y git curl jq

# 2. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Docker (ĞµÑĞ»Ğ¸ ĞµÑ‰Ñ‘ Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½)
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo systemctl enable --now docker

# 3. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
sudo mkdir -p /srv/ebuster
sudo chown $USER:$USER /srv/ebuster
cd /srv/ebuster
git clone https://github.com/codelone0-eng/ebuster-origin-mono-main.git .

# 4. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ .env Ñ„Ğ°Ğ¹Ğ»Ğ°
cat > /srv/ebuster/.env << 'EOF'
NODE_ENV=production
PORT=3001

# Supabase
SUPABASE_URL=your_supabase_url
SUPABASE_SERVICE_KEY=your_service_key

# JWT
JWT_SECRET=your_jwt_secret

# SMTP
SMTP_HOST=smtp.timeweb.ru
SMTP_PORT=465
SMTP_USER=techsupport@ebuster.ru
SMTP_PASS=your_smtp_password

# URLs
CLIENT_URL=https://ebuster.ru
API_BASE_URL=https://api.ebuster.ru
EOF

# 5. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° SSL-ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²
mkdir -p /srv/ebuster/ssl
# Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹ Ğ² /srv/ebuster/ssl/

# 6. ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº
cd /srv/ebuster
docker compose build
docker compose up -d
```

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ…ÑƒĞº Ğ´Ğ»Ñ certbot
sudo tee /etc/letsencrypt/renewal-hooks/deploy/ebuster-restart.sh > /dev/null << 'EOF'
#!/bin/bash
cp /etc/letsencrypt/live/ebuster.ru/fullchain.pem /srv/ebuster/ssl/fullchain.pem
cp /etc/letsencrypt/live/ebuster.ru/privkey.pem /srv/ebuster/ssl/privkey.pem
chmod 600 /srv/ebuster/ssl/privkey.pem
cd /srv/ebuster && docker compose restart frontend
EOF

sudo chmod +x /etc/letsencrypt/renewal-hooks/deploy/ebuster-restart.sh
```

---

## â®ï¸ ĞÑ‚ĞºĞ°Ñ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹

### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¾Ñ‚ĞºĞ°Ñ‚

Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ `deploy.sh` Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ñ‚ĞºĞ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ… ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ¸Ğ»Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°.

### Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚ĞºĞ°Ñ‚ Ğº Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ¼Ñƒ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ñƒ

```bash
cd /srv/ebuster

# 1. ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ²
git log --oneline -10

# 2. ĞÑ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑŒÑÑ Ğº Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ¼Ñƒ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ñƒ (Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ COMMIT_HASH)
git reset --hard COMMIT_HASH

# 3. ĞŸĞµÑ€ĞµÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
docker compose down
docker compose build --no-cache
docker compose up -d

# 4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
docker compose ps
curl https://api.ebuster.ru/api/health
```

### ĞÑ‚ĞºĞ°Ñ‚ Ñ‡ĞµÑ€ĞµĞ· GitHub Actions

1. ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ² **Actions**
2. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **Re-run all jobs**
3. Ğ˜Ğ»Ğ¸ Ğ¾Ñ‚ĞºĞ°Ñ‚Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑˆÑŒÑ‚Ğµ:
   ```bash
   git revert HEAD
   git push origin main
   ```

---

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸

### ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

```bash
# Ğ’ÑĞµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
docker compose logs -f

# Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ API
docker compose logs -f api

# Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Frontend
docker compose logs -f frontend

# ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 100 ÑÑ‚Ñ€Ğ¾Ğº
docker compose logs --tail=100 api
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°

```bash
# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker compose ps

# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
docker stats

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° API
curl https://api.ebuster.ru/api/health

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ°
curl -I https://ebuster.ru
```

### Ğ›Ğ¾Ğ³Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ

```bash
# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ´ĞµĞ¿Ğ»Ğ¾Ñ
tail -f /srv/ebuster/deploy.log

# ĞŸĞ¾Ğ¸ÑĞº Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ…
grep -i error /srv/ebuster/deploy.log

# Ğ›Ğ¾Ğ³Ğ¸ Ğ·Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ
grep "$(date '+%Y-%m-%d')" /srv/ebuster/deploy.log
```

### ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ´Ğ¸ÑĞºĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ°

```bash
# ĞĞ±Ñ‰ĞµĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
df -h

# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Docker
docker system df

# ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ½ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ñ… Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ² Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker system prune -a --volumes
```

---

## ğŸ”¥ Ğ§Ğ°ÑÑ‚Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
docker compose logs

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹
sudo ss -tulpn | grep -E ':80|:443|:3001'

# ĞŸĞµÑ€ĞµÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
docker compose down -v
docker compose up -d
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: API Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ 502/504

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ API-ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°
docker compose ps api

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ API
docker compose logs --tail=100 api

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ API
docker compose restart api
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: SSL-ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²
ls -la /srv/ebuster/ssl/

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹
sudo certbot renew
sudo cp /etc/letsencrypt/live/ebuster.ru/*.pem /srv/ebuster/ssl/

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ frontend
docker compose restart frontend
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞĞµÑ‚ Ğ¼ĞµÑÑ‚Ğ° Ğ½Ğ° Ğ´Ğ¸ÑĞºĞµ

```bash
# ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Docker
docker system prune -a --volumes

# ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
sudo journalctl --vacuum-time=7d

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
docker image prune -a
```

---

## ğŸ“ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

ĞŸÑ€Ğ¸ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼:

1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸: `docker compose logs -f`
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑ: `docker compose ps`
3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ: `tail -f /srv/ebuster/deploy.log`
4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ GitHub Actions: https://github.com/codelone0-eng/ebuster-origin-mono-main/actions

---

## ğŸ¯ Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ĞµĞ´ Ğ´ĞµĞ¿Ğ»Ğ¾ĞµĞ¼

- [ ] ĞšĞ¾Ğ´ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾
- [ ] Ğ’ÑĞµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ·Ğ°ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‡ĞµĞ½Ñ‹
- [ ] `.env` Ñ„Ğ°Ğ¹Ğ» Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½ (ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾)
- [ ] SSL-ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹
- [ ] Ğ”Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ¼ĞµÑÑ‚Ğ° Ğ½Ğ° Ğ´Ğ¸ÑĞºĞµ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 5GB ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾)
- [ ] Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ğ°Ñ ĞºĞ¾Ğ¿Ğ¸Ñ Ğ‘Ğ” ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ° (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ)

---

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹
cd /srv/ebuster && bash deploy.sh

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²
docker compose logs -f api

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº
docker compose restart

# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
docker compose ps

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° API
curl https://api.ebuster.ru/api/health

# ĞÑ‡Ğ¸ÑÑ‚ĞºĞ°
docker system prune -a
```
