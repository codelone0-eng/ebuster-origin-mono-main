services:
  clickhouse:
    image: clickhouse/clickhouse-server:24.3
    container_name: ebuster-clickhouse
    restart: unless-stopped
    env_file:
      - ../.env
    environment:
      CLICKHOUSE_DB: ebuster
      CLICKHOUSE_USER: ${CLICKHOUSE_USER:-ebuster}
      CLICKHOUSE_PASSWORD: ${CLICKHOUSE_PASSWORD:-Q9p!Z7mR3xV2sK8dF5gL1tN}
    volumes:
      - ./data:/var/lib/clickhouse
    ports:
      - "8123:8123"  # HTTP API (используется backend'ом)
      # - "9000:9000"  # native-протокол, включи при необходимости
    networks:
      - ebuster-network

networks:
  ebuster-network:
    name: ebuster-network
    external: true


