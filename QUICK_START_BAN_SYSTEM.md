# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã –±–∞–Ω–æ–≤

## 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (1 –º–∏–Ω—É—Ç–∞)

```bash
npm install nodemailer node-cron node-fetch
npm install --save-dev @types/nodemailer @types/node-cron @types/node-fetch
```

---

## 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î (2 –º–∏–Ω—É—Ç—ã)

### –û—Ç–∫—Ä–æ–π—Ç–µ Supabase SQL Editor:
```
https://supabase.com/dashboard/project/YOUR_PROJECT/sql
```

### –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ src/lib/user-bans-schema.sql
```

–ò–ª–∏ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª:
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ src/lib/user-bans-schema.sql
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å SQL –∫–æ–¥
# –í—Å—Ç–∞–≤—å—Ç–µ –≤ Supabase SQL Editor
# –ù–∞–∂–º–∏—Ç–µ RUN
```

---

## 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP (1 –º–∏–Ω—É—Ç–∞)

### –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
```

### –î–ª—è Gmail:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://myaccount.google.com/apppasswords
2. –°–æ–∑–¥–∞–π—Ç–µ App Password
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ `SMTP_PASS`

---

## 4Ô∏è‚É£ –ó–∞–ø—É—Å–∫ (30 —Å–µ–∫—É–Ω–¥)

```bash
npm run dev
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```
‚úÖ [CRON] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
‚úÖ [CRON] –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –±–∞–Ω–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00)
‚úÖ [CRON] –í—Å–µ cron jobs –∑–∞–ø—É—â–µ–Ω—ã
```

---

## 5Ô∏è‚É£ –¢–µ—Å—Ç (1 –º–∏–Ω—É—Ç–∞)

### –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É:
```
http://localhost:5173/admin
```

### –ó–∞–±–∞–Ω—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –¢–∏–ø: –í—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
   - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 1 —á–∞—Å
   - –ü—Ä–∏—á–∏–Ω–∞: –¢–µ—Å—Ç
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "–ó–∞–±–∞–Ω–µ–Ω"
- ‚úÖ Email –ø—Ä–∏—à–µ–ª –Ω–∞ –ø–æ—á—Ç—É
- ‚úÖ –ó–∞–ø–∏—Å—å –≤ –ë–î —Å–æ–∑–¥–∞–Ω–∞

---

## 6Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### –ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```
üîÑ [CRON] –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...
‚úÖ [CRON] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: 0
```

### –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
curl -X POST http://localhost:3001/api/admin/auto-unban
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –±–∞–Ω–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç:

- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ
- ‚úÖ Endpoint –¥–ª—è –±–∞–Ω–∞
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ email
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- ‚úÖ Cron jobs

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env
cat .env | grep SMTP

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ‚úÖ Email –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞: user@example.com
```

### Cron –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ‚úÖ [CRON] –í—Å–µ cron jobs –∑–∞–ø—É—â–µ–Ω—ã
```

### –ë–î –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
```sql
-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É
SELECT * FROM user_bans LIMIT 1;

-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏
SELECT generate_ban_id();
SELECT auto_unban_users();
```

---

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏: ~5 –º–∏–Ω—É—Ç** ‚è±Ô∏è

**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ
